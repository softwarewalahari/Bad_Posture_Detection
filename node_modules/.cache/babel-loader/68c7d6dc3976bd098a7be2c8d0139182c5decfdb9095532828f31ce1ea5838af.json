{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\haripriya\\\\Desktop\\\\Bad_posture_detection\\\\posture-app\\\\src\\\\components\\\\WebcamCapture.js\",\n  _s = $RefreshSig$();\n// src/components/WebcamCapture.js\nimport React, { useRef, useState } from 'react';\nimport Webcam from 'react-webcam';\nimport axios from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WebcamCapture = () => {\n  _s();\n  const webcamRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const [capturing, setCapturing] = useState(false);\n  const [recordedChunks, setRecordedChunks] = useState([]);\n  const startCapture = () => {\n    setCapturing(true);\n    setRecordedChunks([]);\n    const stream = webcamRef.current.stream;\n    mediaRecorderRef.current = new MediaRecorder(stream, {\n      mimeType: \"video/webm\"\n    });\n    mediaRecorderRef.current.ondataavailable = event => {\n      if (event.data.size > 0) {\n        setRecordedChunks(prev => [...prev, event.data]);\n      }\n    };\n    mediaRecorderRef.current.start();\n  };\n  const stopCapture = () => {\n    mediaRecorderRef.current.stop();\n    setCapturing(false);\n  };\n  const uploadVideo = async () => {\n    if (recordedChunks.length === 0) return alert(\"No video to upload\");\n    const blob = new Blob(recordedChunks, {\n      type: \"video/webm\"\n    });\n    const formData = new FormData();\n    formData.append(\"file\", blob, \"webcam_video.webm\");\n    try {\n      const response = await axios.post('/analyze', formData);\n      alert(\"Video analyzed. Check console or backend response.\");\n      console.log(response.data);\n    } catch (error) {\n      console.error(\"Upload failed\", error);\n      alert(\"Upload failed\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Webcam, {\n      audio: false,\n      ref: webcamRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '10px'\n      },\n      children: [capturing ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopCapture,\n        children: \"Stop Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startCapture,\n        children: \"Start Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: uploadVideo,\n        disabled: recordedChunks.length === 0,\n        children: \"Upload & Analyze\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(WebcamCapture, \"EOHpAtOEFoMt4RqvInYaqiZX97Q=\");\n_c = WebcamCapture;\nexport default WebcamCapture;\nvar _c;\n$RefreshReg$(_c, \"WebcamCapture\");","map":{"version":3,"names":["React","useRef","useState","Webcam","axios","jsxDEV","_jsxDEV","WebcamCapture","_s","webcamRef","mediaRecorderRef","capturing","setCapturing","recordedChunks","setRecordedChunks","startCapture","stream","current","MediaRecorder","mimeType","ondataavailable","event","data","size","prev","start","stopCapture","stop","uploadVideo","length","alert","blob","Blob","type","formData","FormData","append","response","post","console","log","error","style","textAlign","marginTop","children","audio","ref","fileName","_jsxFileName","lineNumber","columnNumber","margin","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/haripriya/Desktop/Bad_posture_detection/posture-app/src/components/WebcamCapture.js"],"sourcesContent":["// src/components/WebcamCapture.js\r\nimport React, { useRef, useState } from 'react';\r\nimport Webcam from 'react-webcam';\r\nimport axios from '../api';\r\n\r\nconst WebcamCapture = () => {\r\n  const webcamRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const [capturing, setCapturing] = useState(false);\r\n  const [recordedChunks, setRecordedChunks] = useState([]);\r\n\r\n  const startCapture = () => {\r\n    setCapturing(true);\r\n    setRecordedChunks([]);\r\n\r\n    const stream = webcamRef.current.stream;\r\n    mediaRecorderRef.current = new MediaRecorder(stream, {\r\n      mimeType: \"video/webm\"\r\n    });\r\n\r\n    mediaRecorderRef.current.ondataavailable = (event) => {\r\n      if (event.data.size > 0) {\r\n        setRecordedChunks((prev) => [...prev, event.data]);\r\n      }\r\n    };\r\n\r\n    mediaRecorderRef.current.start();\r\n  };\r\n\r\n  const stopCapture = () => {\r\n    mediaRecorderRef.current.stop();\r\n    setCapturing(false);\r\n  };\r\n\r\n  const uploadVideo = async () => {\r\n    if (recordedChunks.length === 0) return alert(\"No video to upload\");\r\n\r\n    const blob = new Blob(recordedChunks, { type: \"video/webm\" });\r\n    const formData = new FormData();\r\n    formData.append(\"file\", blob, \"webcam_video.webm\");\r\n\r\n    try {\r\n      const response = await axios.post('/analyze', formData);\r\n      alert(\"Video analyzed. Check console or backend response.\");\r\n      console.log(response.data);\r\n    } catch (error) {\r\n      console.error(\"Upload failed\", error);\r\n      alert(\"Upload failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n      <Webcam audio={false} ref={webcamRef} />\r\n      <div style={{ margin: '10px' }}>\r\n        {capturing ? (\r\n          <button onClick={stopCapture}>Stop Recording</button>\r\n        ) : (\r\n          <button onClick={startCapture}>Start Recording</button>\r\n        )}\r\n        <button onClick={uploadVideo} disabled={recordedChunks.length === 0}>Upload & Analyze</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebcamCapture;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}