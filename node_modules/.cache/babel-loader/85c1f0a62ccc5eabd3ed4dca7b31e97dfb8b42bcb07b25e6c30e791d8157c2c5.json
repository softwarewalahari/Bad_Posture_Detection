{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\haripriya\\\\Desktop\\\\Bad_posture_detection\\\\posture-app\\\\src\\\\components\\\\WebcamCapture.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport Webcam from 'react-webcam';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction WebcamCapture() {\n  _s();\n  const webcamRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const [camOn, setCamOn] = useState(false);\n  const [recording, setRecording] = useState(false);\n  const [recordedBlob, setRecordedBlob] = useState(null);\n  const [videoURL, setVideoURL] = useState(null);\n  const startWebcam = () => {\n    setCamOn(true);\n  };\n  const stopWebcam = () => {\n    setCamOn(false);\n  };\n  const startRecording = () => {\n    setRecording(true);\n    const stream = webcamRef.current.stream;\n    const mediaRecorder = new MediaRecorder(stream, {\n      mimeType: 'video/webm'\n    });\n    let chunks = [];\n    mediaRecorder.ondataavailable = event => {\n      if (event.data.size > 0) {\n        chunks.push(event.data);\n      }\n    };\n    mediaRecorder.onstop = () => {\n      const blob = new Blob(chunks, {\n        type: 'video/webm'\n      });\n      setRecordedBlob(blob);\n      const url = URL.createObjectURL(blob);\n      setVideoURL(url);\n    };\n    mediaRecorderRef.current = mediaRecorder;\n    mediaRecorder.start();\n  };\n  const stopRecording = () => {\n    setRecording(false);\n    mediaRecorderRef.current.stop();\n  };\n  const sendToBackend = async () => {\n    if (!recordedBlob) return;\n    const formData = new FormData();\n    formData.append('file', recordedBlob, 'webcam-video.webm');\n    try {\n      const response = await fetch('http://localhost:54301/analyze', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`Server responded with ${response.status}`);\n      }\n      const result = await response.json();\n      console.log('Analysis result:', result);\n      alert('Video uploaded successfully!');\n    } catch (err) {\n      console.error('Error uploading video:', err);\n      alert('Failed to upload video');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Webcam Video Capture\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), !camOn && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startWebcam,\n      children: \"Start Webcam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 18\n    }, this), camOn && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Webcam, {\n        ref: webcamRef,\n        audio: true,\n        videoConstraints: {\n          width: 640,\n          height: 480\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), !recording && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startRecording,\n        children: \"Start Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 26\n      }, this), recording && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopRecording,\n        children: \"Stop Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopWebcam,\n        children: \"Stop Webcam\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), videoURL && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        src: videoURL,\n        controls: true,\n        width: 400\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendToBackend,\n        children: \"Upload Video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(WebcamCapture, \"MKewQbhiweumGDvWRkv/DegdpyE=\");\n_c = WebcamCapture;\nexport default WebcamCapture;\nvar _c;\n$RefreshReg$(_c, \"WebcamCapture\");","map":{"version":3,"names":["React","useRef","useState","Webcam","jsxDEV","_jsxDEV","Fragment","_Fragment","WebcamCapture","_s","webcamRef","mediaRecorderRef","camOn","setCamOn","recording","setRecording","recordedBlob","setRecordedBlob","videoURL","setVideoURL","startWebcam","stopWebcam","startRecording","stream","current","mediaRecorder","MediaRecorder","mimeType","chunks","ondataavailable","event","data","size","push","onstop","blob","Blob","type","url","URL","createObjectURL","start","stopRecording","stop","sendToBackend","formData","FormData","append","response","fetch","method","body","ok","Error","status","result","json","console","log","alert","err","error","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","audio","videoConstraints","width","height","src","controls","_c","$RefreshReg$"],"sources":["C:/Users/haripriya/Desktop/Bad_posture_detection/posture-app/src/components/WebcamCapture.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport Webcam from 'react-webcam';\r\n\r\nfunction WebcamCapture() {\r\n  const webcamRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n\r\n  const [camOn, setCamOn] = useState(false);\r\n  const [recording, setRecording] = useState(false);\r\n  const [recordedBlob, setRecordedBlob] = useState(null);\r\n  const [videoURL, setVideoURL] = useState(null);\r\n\r\n  const startWebcam = () => {\r\n    setCamOn(true);\r\n  };\r\n\r\n  const stopWebcam = () => {\r\n    setCamOn(false);\r\n  };\r\n\r\n  const startRecording = () => {\r\n    setRecording(true);\r\n    const stream = webcamRef.current.stream;\r\n    const mediaRecorder = new MediaRecorder(stream, {\r\n      mimeType: 'video/webm',\r\n    });\r\n\r\n    let chunks = [];\r\n    mediaRecorder.ondataavailable = (event) => {\r\n      if (event.data.size > 0) {\r\n        chunks.push(event.data);\r\n      }\r\n    };\r\n\r\n    mediaRecorder.onstop = () => {\r\n      const blob = new Blob(chunks, { type: 'video/webm' });\r\n      setRecordedBlob(blob);\r\n      const url = URL.createObjectURL(blob);\r\n      setVideoURL(url);\r\n    };\r\n\r\n    mediaRecorderRef.current = mediaRecorder;\r\n    mediaRecorder.start();\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    setRecording(false);\r\n    mediaRecorderRef.current.stop();\r\n  };\r\n\r\n  const sendToBackend = async () => {\r\n    if (!recordedBlob) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', recordedBlob, 'webcam-video.webm');\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:54301/analyze', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Server responded with ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('Analysis result:', result);\r\n      alert('Video uploaded successfully!');\r\n    } catch (err) {\r\n      console.error('Error uploading video:', err);\r\n      alert('Failed to upload video');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Webcam Video Capture</h2>\r\n\r\n      {!camOn && <button onClick={startWebcam}>Start Webcam</button>}\r\n      {camOn && (\r\n        <>\r\n          <Webcam\r\n            ref={webcamRef}\r\n            audio={true}\r\n            videoConstraints={{ width: 640, height: 480 }}\r\n          />\r\n          <br />\r\n          {!recording && <button onClick={startRecording}>Start Recording</button>}\r\n          {recording && <button onClick={stopRecording}>Stop Recording</button>}\r\n          <button onClick={stopWebcam}>Stop Webcam</button>\r\n        </>\r\n      )}\r\n\r\n      {videoURL && (\r\n        <>\r\n          <h3>Preview</h3>\r\n          <video src={videoURL} controls width={400} />\r\n          <br />\r\n          <button onClick={sendToBackend}>Upload Video</button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WebcamCapture;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}